// Autogenerated Arkos AKG player for MSX-GL library 
// On 13/01/2022 et 15:54:48, 83    
#include "akg_player.h" 
void AKG_Dummy()         
{                         
__asm                     
PLY_AKG_FULL_INIT_CODE = .+1
PLY_AKG_OFFSET1B = .+1
PLY_AKG_STOP_SOUNDS = .+1
PLY_AKG_BITFORSOUND = .+2
PLY_AKG_OFFSET2B = .+2
PLY_AKG_START:
__endasm;
}

// Initialize a music
void AKG_Init(const void* data, u16 sng)
{
__asm
	ld a, e ; convert C parameter
PLY_AKG_INIT:
PLY_AKG_USE_HOOKS:
PLY_AKG_OPCODE_ADD_HL_BC_MSB:
	ld de, #0x4
    add hl, de
PLY_AKG_BITFORNOISE = .+1
    ld de, #PLY_AKG_ARPEGGIOSTABLE+1
    ldi
PLY_AKG_OPCODE_ADD_HL_BC_LSB:
	ldi
    ld de, #PLY_AKG_PITCHESTABLE+1
    ldi
    ldi
    ld de, #PLY_AKG_INSTRUMENTSTABLE+1
    ldi
    ldi
    ld c, (hl)
    inc hl
    ld b, (hl)
    inc hl
    ld (PLY_AKG_CHANNEL_READEFFECTS_EFFECTBLOCKS1+1), bc
PLY_AKG_OPCODE_INC_HL = .+2
    ld (PLY_AKG_CHANNEL_READEFFECTS_EFFECTBLOCKS2+1), bc
    add a, a
    ld e, a
    ld d, #0x0
    add hl, de
    ld a, (hl)
PLY_AKG_OPCODE_DEC_HL:
	inc hl
    ld h, (hl)
    ld l, a
    ld de, #0x5
    add hl, de
    ld de, #PLY_AKG_CHANNEL3_READCELLEND+1
    ldi
PLY_AKG_OPCODE_SCF:
	ld de, #PLY_AKG_CHANNEL1_NOTE+1
    ldi
    ld (PLY_AKG_READLINKER+1), hl
    ld hl, #PLY_AKG_INITTABLE0
PLY_AKG_OPCODE_SBC_HL_BC_LSB:
	ld bc, #0xe00
    call PLY_AKG_INIT_READWORDSANDFILL
    inc c
    ld hl, #PLY_AKG_INITTABLE0_END
    ld b, #0x3
    call PLY_AKG_INIT_READWORDSANDFILL
    ld hl, #PLY_AKG_INITTABLE1_END
    ld bc, #0xdb7
    call PLY_AKG_INIT_READWORDSANDFILL
    ld a, #0xff
    ld (PLY_AKG_PSGREG13_OLDVALUE+1), a
    ld hl, (PLY_AKG_INSTRUMENTSTABLE+1)
    ld e, (hl)
    inc hl
    ld d, (hl)
    ex de, hl
    inc hl
    ld (PLY_AKG_ENDWITHOUTLOOP+1), hl
    ld (PLY_AKG_CHANNEL1_PTINSTRUMENT+1), hl
    ld (PLY_AKG_CHANNEL2_PTINSTRUMENT+1), hl
    ld (PLY_AKG_CHANNEL3_PTINSTRUMENT+1), hl
    ret 
PLY_AKG_INIT_READWORDSANDFILL_LOOP:
	ld e, (hl)
    inc hl
    ld d, (hl)
    inc hl
    ld a, c
    ld (de), a
PLY_AKG_INIT_READWORDSANDFILL:
	djnz PLY_AKG_INIT_READWORDSANDFILL_LOOP
    ret 
PLY_AKG_INITTABLE0:
	.dw PLY_AKG_CHANNEL1_INVERTEDVOLUMEINTEGERANDDECIMAL+1
    .dw PLY_AKG_CHANNEL1_INVERTEDVOLUMEINTEGER
    .dw PLY_AKG_CHANNEL2_INVERTEDVOLUMEINTEGERANDDECIMAL+1
    .dw PLY_AKG_CHANNEL2_INVERTEDVOLUMEINTEGER
    .dw PLY_AKG_CHANNEL3_INVERTEDVOLUMEINTEGERANDDECIMAL+1
    .dw PLY_AKG_CHANNEL3_INVERTEDVOLUMEINTEGER
    .dw PLY_AKG_CHANNEL1_PITCHTABLE_END+1
    .dw PLY_AKG_CHANNEL1_PITCHTABLE_END+2
    .dw PLY_AKG_CHANNEL2_PITCHTABLE_END+1
    .dw PLY_AKG_CHANNEL2_PITCHTABLE_END+2
    .dw PLY_AKG_CHANNEL3_PITCHTABLE_END+1
    .dw PLY_AKG_CHANNEL3_PITCHTABLE_END+2
    .dw PLY_AKG_RETRIG+1
PLY_AKG_INITTABLE0_END:
PLY_AKG_INITTABLE1:
	.dw PLY_AKG_PATTERNDECREASINGHEIGHT+1
    .dw PLY_AKG_TICKDECREASINGCOUNTER+1
PLY_AKG_INITTABLE1_END:
PLY_AKG_INITTABLEORA:
	.dw PLY_AKG_CHANNEL1_ISVOLUMESLIDE
    .dw PLY_AKG_CHANNEL2_ISVOLUMESLIDE
    .dw PLY_AKG_CHANNEL3_ISVOLUMESLIDE
    .dw PLY_AKG_CHANNEL1_ISARPEGGIOTABLE
    .dw PLY_AKG_CHANNEL2_ISARPEGGIOTABLE
    .dw PLY_AKG_CHANNEL3_ISARPEGGIOTABLE
    .dw PLY_AKG_CHANNEL1_ISPITCHTABLE
    .dw PLY_AKG_CHANNEL2_ISPITCHTABLE
    .dw PLY_AKG_CHANNEL3_ISPITCHTABLE
    .dw PLY_AKG_CHANNEL1_ISPITCH
    .dw PLY_AKG_CHANNEL2_ISPITCH
    .dw PLY_AKG_CHANNEL3_ISPITCH
PLY_AKG_INITTABLEORA_END:
__endasm;
}

// Stop the music    
void AKG_Stop()
{
__asm
PLY_AKG_STOP:
	ld (PLY_AKG_PSGREG13_END+1), sp
PLY_AKG_OPCODE_OR_A:
	xor a
    ld l, a
    ld h, a
    ld (PLY_AKG_PSGREG8), a
    ld (PLY_AKG_PSGREG9), hl
    ld a, #0x3f
    jp PLY_AKG_SENDPSGREGISTERS
PLY_AKG_OPCODE_ADD_A_IMMEDIATE = .+1
__endasm;
}

// Play a music frame
void AKG_Decode()
{
__asm
PLY_AKG_PLAY:
	ld (PLY_AKG_PSGREG13_END+1), sp
    xor a
    ld (PLY_AKG_EVENT), a
PLY_AKG_TICKDECREASINGCOUNTER:
	ld a, #0x1
    dec a
    jp nz, PLY_AKG_SETSPEEDBEFOREPLAYSTREAMS
PLY_AKG_PATTERNDECREASINGHEIGHT:
	ld a, #0x1
    dec a
PLY_AKG_OPCODE_SUB_IMMEDIATE:
	jr nz, PLY_AKG_SETCURRENTLINEBEFOREREADLINE
PLY_AKG_READLINKER:
PLY_AKG_READLINKER_PTLINKER:
	ld sp, #0x0
    pop hl
    ld a, l
    or h
    jr nz, PLY_AKG_READLINKER_NOLOOP
    pop hl
    ld sp, hl
    pop hl
PLY_AKG_READLINKER_NOLOOP:
	ld (PLY_AKG_CHANNEL1_READTRACK+1), hl
    pop hl
    ld (PLY_AKG_CHANNEL2_READTRACK+1), hl
    pop hl
PLY_AKG_OPCODE_SBC_HL_BC_MSB = .+2
    ld (PLY_AKG_CHANNEL3_READTRACK+1), hl
    pop hl
    ld (PLY_AKG_READLINKER+1), sp
    ld sp, hl
    pop hl
    ld c, l
    ld a, h
    ld (PLY_AKG_CHANNEL1_AFTERNOTEKNOWN+1), a
    pop hl
    ld a, l
    ld (PLY_AKG_CHANNEL2_AFTERNOTEKNOWN+1), a
    ld a, h
    ld (PLY_AKG_CHANNEL3_AFTERNOTEKNOWN+1), a
    pop hl
    ld (PLY_AKG_SPEEDTRACK_PTTRACK+1), hl
    pop hl
    ld (PLY_AKG_EVENTTRACK_PTTRACK+1), hl
    xor a
    ld (PLY_AKG_READLINE+1), a
    ld (PLY_AKG_SPEEDTRACK_END+1), a
    ld (PLY_AKG_EVENTTRACK_END+1), a
    ld (PLY_AKG_CHANNEL1_READCELLEND+1), a
    ld (PLY_AKG_CHANNEL2_READCELLEND+1), a
    ld a, c
PLY_AKG_SETCURRENTLINEBEFOREREADLINE:
	ld (PLY_AKG_PATTERNDECREASINGHEIGHT+1), a
PLY_AKG_READLINE:
PLY_AKG_SPEEDTRACK_WAITCOUNTER:
	ld a, #0x0
    sub #0x1
    jr nc, PLY_AKG_SPEEDTRACK_MUSTWAIT
PLY_AKG_SPEEDTRACK_PTTRACK:
	ld hl, #0x0
    ld a, (hl)
    inc hl
    srl a
    jr c, PLY_AKG_SPEEDTRACK_STOREPOINTERANDWAITCOUNTER
    jr nz, PLY_AKG_SPEEDTRACK_NORMALVALUE
    ld a, (hl)
    inc hl
PLY_AKG_SPEEDTRACK_NORMALVALUE:
	ld (PLY_AKG_CHANNEL3_READCELLEND+1), a
    xor a
PLY_AKG_SPEEDTRACK_STOREPOINTERANDWAITCOUNTER:
	ld (PLY_AKG_SPEEDTRACK_PTTRACK+1), hl
PLY_AKG_SPEEDTRACK_MUSTWAIT:
	ld (PLY_AKG_READLINE+1), a
PLY_AKG_SPEEDTRACK_END:
PLY_AKG_EVENTTRACK_WAITCOUNTER:
	ld a, #0x0
    sub #0x1
    jr nc, PLY_AKG_EVENTTRACK_MUSTWAIT
PLY_AKG_EVENTTRACK_PTTRACK:
	ld hl, #0x0
    ld a, (hl)
    inc hl
    srl a
    jr c, PLY_AKG_EVENTTRACK_STOREPOINTERANDWAITCOUNTER
    jr nz, PLY_AKG_EVENTTRACK_NORMALVALUE
    ld a, (hl)
    inc hl
PLY_AKG_EVENTTRACK_NORMALVALUE:
	ld (PLY_AKG_EVENT), a
    xor a
PLY_AKG_EVENTTRACK_STOREPOINTERANDWAITCOUNTER:
	ld (PLY_AKG_EVENTTRACK_PTTRACK+1), hl
PLY_AKG_EVENTTRACK_MUSTWAIT:
	ld (PLY_AKG_SPEEDTRACK_END+1), a
PLY_AKG_EVENTTRACK_END:
PLY_AKG_CHANNEL1_WAITCOUNTER:
	ld a, #0x0
    sub #0x1
    jr c, PLY_AKG_CHANNEL1_READTRACK
    ld (PLY_AKG_EVENTTRACK_END+1), a
    jp PLY_AKG_CHANNEL1_READCELLEND
PLY_AKG_CHANNEL1_READTRACK:
PLY_AKG_CHANNEL1_PTTRACK:
	ld hl, #0x0
    ld c, (hl)
    inc hl
    ld a, c
    and #0x3f
    cp #0x3c
    jr c, PLY_AKG_CHANNEL1_NOTE
    sub #0x3c
    jp z, PLY_AKG_CHANNEL1_MAYBEEFFECTS
    dec a
    jr z, PLY_AKG_CHANNEL1_WAIT
    dec a
    jr z, PLY_AKG_CHANNEL1_SMALLWAIT
    ld a, (hl)
    inc hl
    jr PLY_AKG_CHANNEL1_AFTERNOTEKNOWN
PLY_AKG_CHANNEL1_SMALLWAIT:
	ld a, c
    rlca 
    rlca 
    and #0x3
    inc a
    ld (PLY_AKG_EVENTTRACK_END+1), a
    jr PLY_AKG_CHANNEL1_BEFOREEND_STORECELLPOINTER
PLY_AKG_CHANNEL1_WAIT:
	ld a, (hl)
    ld (PLY_AKG_EVENTTRACK_END+1), a
    inc hl
    jr PLY_AKG_CHANNEL1_BEFOREEND_STORECELLPOINTER
PLY_AKG_CHANNEL1_SAMEINSTRUMENT:
PLY_AKG_CHANNEL1_PTBASEINSTRUMENT:
	ld de, #0x0
    ld (PLY_AKG_CHANNEL1_PTINSTRUMENT+1), de
    jr PLY_AKG_CHANNEL1_AFTERINSTRUMENT
PLY_AKG_CHANNEL1_NOTE:
PLY_AKG_BASENOTEINDEX:
	add a, #0x0
PLY_AKG_CHANNEL1_AFTERNOTEKNOWN:
PLY_AKG_CHANNEL1_TRANSPOSITION:
	add a, #0x0
    ld (PLY_AKG_CHANNEL1_TRACKNOTE+1), a
    rl c
    jr nc, PLY_AKG_CHANNEL1_SAMEINSTRUMENT
    ld a, (hl)
    inc hl
    exx
    ld l, a
    ld h, #0x0
    add hl, hl
PLY_AKG_INSTRUMENTSTABLE:
	ld de, #0x0
    add hl, de
    ld sp, hl
    pop hl
    ld a, (hl)
    inc hl
    ld (PLY_AKG_CHANNEL1_INSTRUMENTORIGINALSPEED+1), a
    ld (PLY_AKG_CHANNEL1_PTINSTRUMENT+1), hl
    ld (PLY_AKG_CHANNEL1_SAMEINSTRUMENT+1), hl
    exx
PLY_AKG_CHANNEL1_AFTERINSTRUMENT:
	ex de, hl
    xor a
    ld l, a
    ld h, a
    ld (PLY_AKG_CHANNEL1_PITCHTABLE_END+1), hl
    ld (PLY_AKG_CHANNEL1_ARPEGGIOTABLECURRENTSTEP+1), a
    ld (PLY_AKG_CHANNEL1_PITCHTABLECURRENTSTEP+1), a
    ld (PLY_AKG_CHANNEL1_INSTRUMENTSTEP+2), a
PLY_AKG_CHANNEL1_INSTRUMENTORIGINALSPEED:
	ld a, #0x0
    ld (PLY_AKG_CHANNEL1_INSTRUMENTSPEED+1), a
    ld a, #0xb7
    ld (PLY_AKG_CHANNEL1_ISPITCH), a
    ld a, (PLY_AKG_CHANNEL1_ARPEGGIOBASESPEED)
    ld (PLY_AKG_CHANNEL1_ARPEGGIOTABLESPEED), a
    ld a, (PLY_AKG_CHANNEL1_PITCHBASESPEED)
    ld (PLY_AKG_CHANNEL1_PITCHTABLESPEED), a
    ld hl, (PLY_AKG_CHANNEL1_ARPEGGIOTABLEBASE)
    ld (PLY_AKG_CHANNEL1_ARPEGGIOTABLE+1), hl
    ld hl, (PLY_AKG_CHANNEL1_PITCHTABLEBASE)
    ld (PLY_AKG_CHANNEL1_PITCHTABLE+1), hl
    ex de, hl
    rl c
    jp c, PLY_AKG_CHANNEL1_READEFFECTS
PLY_AKG_CHANNEL1_BEFOREEND_STORECELLPOINTER:
	ld (PLY_AKG_CHANNEL1_READTRACK+1), hl
PLY_AKG_CHANNEL1_READCELLEND:
PLY_AKG_CHANNEL2_WAITCOUNTER:
	ld a, #0x0
    sub #0x1
    jr c, PLY_AKG_CHANNEL2_READTRACK
    ld (PLY_AKG_CHANNEL1_READCELLEND+1), a
    jp PLY_AKG_CHANNEL2_READCELLEND
PLY_AKG_CHANNEL2_READTRACK:
PLY_AKG_CHANNEL2_PTTRACK:
	ld hl, #0x0
    ld c, (hl)
    inc hl
    ld a, c
    and #0x3f
    cp #0x3c
    jr c, PLY_AKG_CHANNEL2_NOTE
    sub #0x3c
    jp z, PLY_AKG_CHANNEL1_READEFFECTSEND
    dec a
    jr z, PLY_AKG_CHANNEL2_WAIT
    dec a
    jr z, PLY_AKG_CHANNEL2_SMALLWAIT
    ld a, (hl)
    inc hl
    jr PLY_AKG_CHANNEL2_AFTERNOTEKNOWN
PLY_AKG_CHANNEL2_SMALLWAIT:
	ld a, c
    rlca 
    rlca 
    and #0x3
    inc a
    ld (PLY_AKG_CHANNEL1_READCELLEND+1), a
    jr PLY_AKG_CHANNEL2_BEFOREEND_STORECELLPOINTER
PLY_AKG_CHANNEL2_WAIT:
	ld a, (hl)
    ld (PLY_AKG_CHANNEL1_READCELLEND+1), a
    inc hl
    jr PLY_AKG_CHANNEL2_BEFOREEND_STORECELLPOINTER
PLY_AKG_CHANNEL2_SAMEINSTRUMENT:
PLY_AKG_CHANNEL2_PTBASEINSTRUMENT:
	ld de, #0x0
    ld (PLY_AKG_CHANNEL2_PTINSTRUMENT+1), de
    jr PLY_AKG_CHANNEL2_AFTERINSTRUMENT
PLY_AKG_CHANNEL2_NOTE:
	ld b, a
    ld a, (PLY_AKG_CHANNEL1_NOTE+1)
    add a, b
PLY_AKG_CHANNEL2_AFTERNOTEKNOWN:
PLY_AKG_CHANNEL2_TRANSPOSITION:
	add a, #0x0
    ld (PLY_AKG_CHANNEL2_TRACKNOTE+1), a
    rl c
    jr nc, PLY_AKG_CHANNEL2_SAMEINSTRUMENT
    ld a, (hl)
    inc hl
    exx
    ld e, a
    ld d, #0x0
    ld hl, (PLY_AKG_INSTRUMENTSTABLE+1)
    add hl, de
    add hl, de
    ld sp, hl
    pop hl
    ld a, (hl)
    inc hl
    ld (PLY_AKG_CHANNEL2_INSTRUMENTORIGINALSPEED+1), a
    ld (PLY_AKG_CHANNEL2_PTINSTRUMENT+1), hl
    ld (PLY_AKG_CHANNEL2_SAMEINSTRUMENT+1), hl
    exx
PLY_AKG_CHANNEL2_AFTERINSTRUMENT:
	ex de, hl
    xor a
    ld l, a
    ld h, a
    ld (PLY_AKG_CHANNEL2_PITCHTABLE_END+1), hl
    ld (PLY_AKG_CHANNEL2_ARPEGGIOTABLECURRENTSTEP+1), a
    ld (PLY_AKG_CHANNEL2_PITCHTABLECURRENTSTEP+1), a
    ld (PLY_AKG_CHANNEL2_INSTRUMENTSTEP+2), a
PLY_AKG_CHANNEL2_INSTRUMENTORIGINALSPEED:
	ld a, #0x0
    ld (PLY_AKG_CHANNEL2_INSTRUMENTSPEED+1), a
    ld a, #0xb7
    ld (PLY_AKG_CHANNEL2_ISPITCH), a
    ld a, (PLY_AKG_CHANNEL2_ARPEGGIOBASESPEED)
    ld (PLY_AKG_CHANNEL2_ARPEGGIOTABLESPEED), a
    ld a, (PLY_AKG_CHANNEL2_PITCHBASESPEED)
    ld (PLY_AKG_CHANNEL2_PITCHTABLESPEED), a
    ld hl, (PLY_AKG_CHANNEL2_ARPEGGIOTABLEBASE)
    ld (PLY_AKG_CHANNEL2_ARPEGGIOTABLE+1), hl
    ld hl, (PLY_AKG_CHANNEL2_PITCHTABLEBASE)
    ld (PLY_AKG_CHANNEL2_PITCHTABLE+1), hl
    ex de, hl
    rl c
    jp c, PLY_AKG_CHANNEL2_READEFFECTS
PLY_AKG_CHANNEL2_BEFOREEND_STORECELLPOINTER:
	ld (PLY_AKG_CHANNEL2_READTRACK+1), hl
PLY_AKG_CHANNEL2_READCELLEND:
PLY_AKG_CHANNEL3_WAITCOUNTER:
	ld a, #0x0
    sub #0x1
    jr c, PLY_AKG_CHANNEL3_READTRACK
    ld (PLY_AKG_CHANNEL2_READCELLEND+1), a
    jp PLY_AKG_CHANNEL3_READCELLEND
PLY_AKG_CHANNEL3_READTRACK:
PLY_AKG_CHANNEL3_PTTRACK:
	ld hl, #0x0
    ld c, (hl)
    inc hl
    ld a, c
    and #0x3f
    cp #0x3c
    jr c, PLY_AKG_CHANNEL3_NOTE
    sub #0x3c
    jp z, PLY_AKG_CHANNEL2_READEFFECTSEND
    dec a
    jr z, PLY_AKG_CHANNEL3_WAIT
    dec a
    jr z, PLY_AKG_CHANNEL3_SMALLWAIT
    ld a, (hl)
    inc hl
    jr PLY_AKG_CHANNEL3_AFTERNOTEKNOWN
PLY_AKG_CHANNEL3_SMALLWAIT:
	ld a, c
    rlca 
    rlca 
    and #0x3
    inc a
    ld (PLY_AKG_CHANNEL2_READCELLEND+1), a
    jr PLY_AKG_CHANNEL3_BEFOREEND_STORECELLPOINTER
PLY_AKG_CHANNEL3_WAIT:
	ld a, (hl)
    ld (PLY_AKG_CHANNEL2_READCELLEND+1), a
    inc hl
    jr PLY_AKG_CHANNEL3_BEFOREEND_STORECELLPOINTER
PLY_AKG_CHANNEL3_SAMEINSTRUMENT:
PLY_AKG_CHANNEL3_PTBASEINSTRUMENT:
	ld de, #0x0
    ld (PLY_AKG_CHANNEL3_PTINSTRUMENT+1), de
    jr PLY_AKG_CHANNEL3_AFTERINSTRUMENT
PLY_AKG_CHANNEL3_NOTE:
	ld b, a
    ld a, (PLY_AKG_CHANNEL1_NOTE+1)
    add a, b
PLY_AKG_CHANNEL3_AFTERNOTEKNOWN:
PLY_AKG_CHANNEL3_TRANSPOSITION:
	add a, #0x0
    ld (PLY_AKG_CHANNEL3_TRACKNOTE+1), a
    rl c
    jr nc, PLY_AKG_CHANNEL3_SAMEINSTRUMENT
    ld a, (hl)
    inc hl
    exx
    ld e, a
    ld d, #0x0
    ld hl, (PLY_AKG_INSTRUMENTSTABLE+1)
    add hl, de
    add hl, de
    ld sp, hl
    pop hl
    ld a, (hl)
    inc hl
    ld (PLY_AKG_CHANNEL3_INSTRUMENTORIGINALSPEED+1), a
    ld (PLY_AKG_CHANNEL3_PTINSTRUMENT+1), hl
    ld (PLY_AKG_CHANNEL3_SAMEINSTRUMENT+1), hl
    exx
PLY_AKG_CHANNEL3_AFTERINSTRUMENT:
	ex de, hl
    xor a
    ld l, a
    ld h, a
    ld (PLY_AKG_CHANNEL3_PITCHTABLE_END+1), hl
    ld (PLY_AKG_CHANNEL3_ARPEGGIOTABLECURRENTSTEP+1), a
    ld (PLY_AKG_CHANNEL3_PITCHTABLECURRENTSTEP+1), a
    ld (PLY_AKG_CHANNEL3_INSTRUMENTSTEP+2), a
PLY_AKG_CHANNEL3_INSTRUMENTORIGINALSPEED:
	ld a, #0x0
    ld (PLY_AKG_CHANNEL3_INSTRUMENTSPEED+1), a
    ld a, #0xb7
    ld (PLY_AKG_CHANNEL3_ISPITCH), a
    ld a, (PLY_AKG_CHANNEL3_ARPEGGIOBASESPEED)
    ld (PLY_AKG_CHANNEL3_ARPEGGIOTABLESPEED), a
    ld a, (PLY_AKG_CHANNEL3_PITCHBASESPEED)
    ld (PLY_AKG_CHANNEL3_PITCHTABLESPEED), a
    ld hl, (PLY_AKG_CHANNEL3_ARPEGGIOTABLEBASE)
    ld (PLY_AKG_CHANNEL3_ARPEGGIOTABLE+1), hl
    ld hl, (PLY_AKG_CHANNEL3_PITCHTABLEBASE)
    ld (PLY_AKG_CHANNEL3_PITCHTABLE+1), hl
    ex de, hl
    rl c
    jp c, PLY_AKG_CHANNEL3_READEFFECTS
PLY_AKG_CHANNEL3_BEFOREEND_STORECELLPOINTER:
	ld (PLY_AKG_CHANNEL3_READTRACK+1), hl
PLY_AKG_CHANNEL3_READCELLEND:
PLY_AKG_CURRENTSPEED:
	ld a, #0x0
PLY_AKG_SETSPEEDBEFOREPLAYSTREAMS:
	ld (PLY_AKG_TICKDECREASINGCOUNTER+1), a
PLY_AKG_CHANNEL1_INVERTEDVOLUMEINTEGER = .+2
PLY_AKG_CHANNEL1_INVERTEDVOLUMEINTEGERANDDECIMAL:
	ld hl, #0x0
PLY_AKG_CHANNEL1_ISVOLUMESLIDE:
	or a
    jr nc, PLY_AKG_CHANNEL1_VOLUMESLIDE_END
PLY_AKG_CHANNEL1_VOLUMESLIDEVALUE:
	ld de, #0x0
    add hl, de
    bit 7, h
    jr z, PLY_AKG_CHANNEL1_VOLUMENOTOVERFLOW
    ld h, #0x0
    jr PLY_AKG_CHANNEL1_VOLUMESETAGAIN
PLY_AKG_CHANNEL1_VOLUMENOTOVERFLOW:
	ld a, h
    cp #0x10
    jr c, PLY_AKG_CHANNEL1_VOLUMESETAGAIN
    ld h, #0xf
PLY_AKG_CHANNEL1_VOLUMESETAGAIN:
	ld (PLY_AKG_CHANNEL1_INVERTEDVOLUMEINTEGERANDDECIMAL+1), hl
PLY_AKG_CHANNEL1_VOLUMESLIDE_END:
	ld a, h
    ld (PLY_AKG_CHANNEL1_GENERATEDCURRENTINVERTEDVOLUME+1), a
    ld c, #0x0
PLY_AKG_CHANNEL1_ISARPEGGIOTABLE:
	or a
    jr nc, PLY_AKG_CHANNEL1_ARPEGGIOTABLE_END
PLY_AKG_CHANNEL1_ARPEGGIOTABLE:
	ld hl, #0x0
    ld a, (hl)
    cp #0x80
    jr nz, PLY_AKG_CHANNEL1_ARPEGGIOTABLE_AFTERLOOPTEST
    inc hl
    ld a, (hl)
    inc hl
    ld h, (hl)
    ld l, a
    ld a, (hl)
PLY_AKG_CHANNEL1_ARPEGGIOTABLE_AFTERLOOPTEST:
	ld c, a
    ld a, (PLY_AKG_CHANNEL1_ARPEGGIOTABLESPEED)
    ld d, a
PLY_AKG_CHANNEL1_ARPEGGIOTABLECURRENTSTEP:
	ld a, #0x0
    inc a
    cp d
    jr c, PLY_AKG_CHANNEL1_ARPEGGIOTABLE_BEFOREEND_SAVESTEP
    inc hl
    ld (PLY_AKG_CHANNEL1_ARPEGGIOTABLE+1), hl
    xor a
PLY_AKG_CHANNEL1_ARPEGGIOTABLE_BEFOREEND_SAVESTEP:
	ld (PLY_AKG_CHANNEL1_ARPEGGIOTABLECURRENTSTEP+1), a
PLY_AKG_CHANNEL1_ARPEGGIOTABLE_END:
	ld de, #0x0
PLY_AKG_CHANNEL1_ISPITCHTABLE:
	or a
    jr nc, PLY_AKG_CHANNEL1_PITCHTABLE_END
PLY_AKG_CHANNEL1_PITCHTABLE:
	ld sp, #0x0
    pop de
    pop hl
    ld a, (PLY_AKG_CHANNEL1_PITCHTABLESPEED)
    ld b, a
PLY_AKG_CHANNEL1_PITCHTABLECURRENTSTEP:
	ld a, #0x0
    inc a
    cp b
    jr c, PLY_AKG_CHANNEL1_PITCHTABLE_BEFOREEND_SAVESTEP
    ld (PLY_AKG_CHANNEL1_PITCHTABLE+1), hl
    xor a
PLY_AKG_CHANNEL1_PITCHTABLE_BEFOREEND_SAVESTEP:
	ld (PLY_AKG_CHANNEL1_PITCHTABLECURRENTSTEP+1), a
PLY_AKG_CHANNEL1_PITCHTABLE_END:
PLY_AKG_CHANNEL1_PITCH:
	ld hl, #0x0
PLY_AKG_CHANNEL1_ISPITCH:
	or a
    jr nc, PLY_AKG_CHANNEL1_PITCH_END
    .db 0xdd
    .db 0x69
PLY_AKG_CHANNEL1_PITCHTRACK:
	ld bc, #0x0
    or a
PLY_AKG_CHANNEL1_PITCHTRACKADDORSBC_16BITS:
	nop
    add hl, bc
PLY_AKG_CHANNEL1_PITCHTRACKDECIMALCOUNTER:
	ld a, #0x0
PLY_AKG_CHANNEL1_PITCHTRACKDECIMALVALUE = .+1
PLY_AKG_CHANNEL1_PITCHTRACKDECIMALINSTR:
	add a, #0x0
    ld (PLY_AKG_CHANNEL1_PITCHTRACKDECIMALCOUNTER+1), a
    jr nc, PLY_AKG_CHANNEL1_PITCHNOCARRY
PLY_AKG_CHANNEL1_PITCHTRACKINTEGERADDORSUB:
	inc hl
PLY_AKG_CHANNEL1_PITCHNOCARRY:
	ld (PLY_AKG_CHANNEL1_PITCHTABLE_END+1), hl
PLY_AKG_CHANNEL1_SOUNDSTREAM_RELATIVEMODIFIERADDRESS:
PLY_AKG_CHANNEL1_GLIDEDIRECTION:
	ld a, #0x0
    or a
    jr z, PLY_AKG_CHANNEL1_GLIDE_END
    ld (PLY_AKG_CHANNEL1_AFTERARPEGGIOPITCHVARIABLES+1), hl
    ld c, l
    ld b, h
    ex af, af'
    ld a, (PLY_AKG_CHANNEL1_TRACKNOTE+1)
    add a, a
    ld l, a
    ex af, af'
    ld h, #0x0
    ld sp, #PLY_AKG_PERIODTABLE
    add hl, sp
    ld sp, hl
    pop hl
    dec sp
    dec sp
    add hl, bc
PLY_AKG_CHANNEL1_GLIDETOREACH:
	ld bc, #0x0
    rra 
    jr nc, PLY_AKG_CHANNEL1_GLIDEDOWNCHECK
    or a
    sbc hl, bc
    jr nc, PLY_AKG_CHANNEL1_AFTERARPEGGIOPITCHVARIABLES
    jr PLY_AKG_CHANNEL1_GLIDEOVER
PLY_AKG_CHANNEL1_GLIDEDOWNCHECK:
	sbc hl, bc
    jr c, PLY_AKG_CHANNEL1_AFTERARPEGGIOPITCHVARIABLES
PLY_AKG_CHANNEL1_GLIDEOVER:
	ld l, c
    ld h, b
    pop bc
    or a
    sbc hl, bc
    ld (PLY_AKG_CHANNEL1_PITCHTABLE_END+1), hl
    ld a, #0xb7
    ld (PLY_AKG_CHANNEL1_ISPITCH), a
    jr PLY_AKG_CHANNEL1_GLIDE_END
PLY_AKG_CHANNEL1_ARPEGGIOTABLESPEED:
	.db 0x0
PLY_AKG_CHANNEL1_ARPEGGIOBASESPEED:
	.db 0x0
PLY_AKG_CHANNEL1_ARPEGGIOTABLEBASE:
	.db 0x0
    .db 0x0
PLY_AKG_CHANNEL1_PITCHTABLESPEED:
	.db 0x0
PLY_AKG_CHANNEL1_PITCHBASESPEED:
	.db 0x0
PLY_AKG_CHANNEL1_PITCHTABLEBASE:
	.db 0x0
    .db 0x0
PLY_AKG_CHANNEL1_AFTERARPEGGIOPITCHVARIABLES:
PLY_AKG_CHANNEL1_GLIDE_BEFOREEND:
PLY_AKG_CHANNEL1_GLIDE_SAVEHL:
	ld hl, #0x0
PLY_AKG_CHANNEL1_GLIDE_END:
	.db 0xdd
    .db 0x4d
PLY_AKG_CHANNEL1_PITCH_END:
	add hl, de
    ld (PLY_AKG_CHANNEL1_PLAYINSTRUMENT_RELATIVEMODIFIERADDRESS+1), hl
    ld a, c
    ld (PLY_AKG_CHANNEL1_GENERATEDCURRENTARPNOTE+1), a
PLY_AKG_CHANNEL2_INVERTEDVOLUMEINTEGER = .+2
PLY_AKG_CHANNEL2_INVERTEDVOLUMEINTEGERANDDECIMAL:
	ld hl, #0x0
PLY_AKG_CHANNEL2_ISVOLUMESLIDE:
	or a
    jr nc, PLY_AKG_CHANNEL2_VOLUMESLIDE_END
PLY_AKG_CHANNEL2_VOLUMESLIDEVALUE:
	ld de, #0x0
    add hl, de
    bit 7, h
    jr z, PLY_AKG_CHANNEL2_VOLUMENOTOVERFLOW
    ld h, #0x0
    jr PLY_AKG_CHANNEL2_VOLUMESETAGAIN
PLY_AKG_CHANNEL2_VOLUMENOTOVERFLOW:
	ld a, h
    cp #0x10
    jr c, PLY_AKG_CHANNEL2_VOLUMESETAGAIN
    ld h, #0xf
PLY_AKG_CHANNEL2_VOLUMESETAGAIN:
	ld (PLY_AKG_CHANNEL2_INVERTEDVOLUMEINTEGERANDDECIMAL+1), hl
PLY_AKG_CHANNEL2_VOLUMESLIDE_END:
	ld a, h
    ld (PLY_AKG_CHANNEL2_GENERATEDCURRENTINVERTEDVOLUME+1), a
    ld c, #0x0
PLY_AKG_CHANNEL2_ISARPEGGIOTABLE:
	or a
    jr nc, PLY_AKG_CHANNEL2_ARPEGGIOTABLE_END
PLY_AKG_CHANNEL2_ARPEGGIOTABLE:
	ld hl, #0x0
    ld a, (hl)
    cp #0x80
    jr nz, PLY_AKG_CHANNEL2_ARPEGGIOTABLE_AFTERLOOPTEST
    inc hl
    ld a, (hl)
    inc hl
    ld h, (hl)
    ld l, a
    ld a, (hl)
PLY_AKG_CHANNEL2_ARPEGGIOTABLE_AFTERLOOPTEST:
	ld c, a
    ld a, (PLY_AKG_CHANNEL2_ARPEGGIOTABLESPEED)
    ld d, a
PLY_AKG_CHANNEL2_ARPEGGIOTABLECURRENTSTEP:
	ld a, #0x0
    inc a
    cp d
    jr c, PLY_AKG_CHANNEL2_ARPEGGIOTABLE_BEFOREEND_SAVESTEP
    inc hl
    ld (PLY_AKG_CHANNEL2_ARPEGGIOTABLE+1), hl
    xor a
PLY_AKG_CHANNEL2_ARPEGGIOTABLE_BEFOREEND_SAVESTEP:
	ld (PLY_AKG_CHANNEL2_ARPEGGIOTABLECURRENTSTEP+1), a
PLY_AKG_CHANNEL2_ARPEGGIOTABLE_END:
	ld de, #0x0
PLY_AKG_CHANNEL2_ISPITCHTABLE:
	or a
    jr nc, PLY_AKG_CHANNEL2_PITCHTABLE_END
PLY_AKG_CHANNEL2_PITCHTABLE:
	ld sp, #0x0
    pop de
    pop hl
    ld a, (PLY_AKG_CHANNEL2_PITCHTABLESPEED)
    ld b, a
PLY_AKG_CHANNEL2_PITCHTABLECURRENTSTEP:
	ld a, #0x0
    inc a
    cp b
    jr c, PLY_AKG_CHANNEL2_PITCHTABLE_BEFOREEND_SAVESTEP
    ld (PLY_AKG_CHANNEL2_PITCHTABLE+1), hl
    xor a
PLY_AKG_CHANNEL2_PITCHTABLE_BEFOREEND_SAVESTEP:
	ld (PLY_AKG_CHANNEL2_PITCHTABLECURRENTSTEP+1), a
PLY_AKG_CHANNEL2_PITCHTABLE_END:
PLY_AKG_CHANNEL2_PITCH:
	ld hl, #0x0
PLY_AKG_CHANNEL2_ISPITCH:
	or a
    jr nc, PLY_AKG_CHANNEL2_PITCH_END
    .db 0xdd
    .db 0x69
PLY_AKG_CHANNEL2_PITCHTRACK:
	ld bc, #0x0
    or a
PLY_AKG_CHANNEL2_PITCHTRACKADDORSBC_16BITS:
	nop
    add hl, bc
PLY_AKG_CHANNEL2_PITCHTRACKDECIMALCOUNTER:
	ld a, #0x0
PLY_AKG_CHANNEL2_PITCHTRACKDECIMALVALUE = .+1
PLY_AKG_CHANNEL2_PITCHTRACKDECIMALINSTR:
	add a, #0x0
    ld (PLY_AKG_CHANNEL2_PITCHTRACKDECIMALCOUNTER+1), a
    jr nc, PLY_AKG_CHANNEL2_PITCHNOCARRY
PLY_AKG_CHANNEL2_PITCHTRACKINTEGERADDORSUB:
	inc hl
PLY_AKG_CHANNEL2_PITCHNOCARRY:
	ld (PLY_AKG_CHANNEL2_PITCHTABLE_END+1), hl
PLY_AKG_CHANNEL2_SOUNDSTREAM_RELATIVEMODIFIERADDRESS:
PLY_AKG_CHANNEL2_GLIDEDIRECTION:
	ld a, #0x0
    or a
    jr z, PLY_AKG_CHANNEL2_GLIDE_END
    ld (PLY_AKG_CHANNEL2_AFTERARPEGGIOPITCHVARIABLES+1), hl
    ld c, l
    ld b, h
    ex af, af'
    ld a, (PLY_AKG_CHANNEL2_TRACKNOTE+1)
    add a, a
    ld l, a
    ex af, af'
    ld h, #0x0
    ld sp, #PLY_AKG_PERIODTABLE
    add hl, sp
    ld sp, hl
    pop hl
    dec sp
    dec sp
    add hl, bc
PLY_AKG_CHANNEL2_GLIDETOREACH:
	ld bc, #0x0
    rra 
    jr nc, PLY_AKG_CHANNEL2_GLIDEDOWNCHECK
    or a
    sbc hl, bc
    jr nc, PLY_AKG_CHANNEL2_AFTERARPEGGIOPITCHVARIABLES
    jr PLY_AKG_CHANNEL2_GLIDEOVER
PLY_AKG_CHANNEL2_GLIDEDOWNCHECK:
	sbc hl, bc
    jr c, PLY_AKG_CHANNEL2_AFTERARPEGGIOPITCHVARIABLES
PLY_AKG_CHANNEL2_GLIDEOVER:
	ld l, c
    ld h, b
    pop bc
    or a
    sbc hl, bc
    ld (PLY_AKG_CHANNEL2_PITCHTABLE_END+1), hl
    ld a, #0xb7
    ld (PLY_AKG_CHANNEL2_ISPITCH), a
    jr PLY_AKG_CHANNEL2_GLIDE_END
PLY_AKG_CHANNEL2_ARPEGGIOTABLESPEED:
	.db 0x0
PLY_AKG_CHANNEL2_ARPEGGIOBASESPEED:
	.db 0x0
PLY_AKG_CHANNEL2_ARPEGGIOTABLEBASE:
	.db 0x0
    .db 0x0
PLY_AKG_CHANNEL2_PITCHTABLESPEED:
	.db 0x0
PLY_AKG_CHANNEL2_PITCHBASESPEED:
	.db 0x0
PLY_AKG_CHANNEL2_PITCHTABLEBASE:
	.db 0x0
    .db 0x0
PLY_AKG_CHANNEL2_AFTERARPEGGIOPITCHVARIABLES:
PLY_AKG_CHANNEL2_GLIDE_BEFOREEND:
PLY_AKG_CHANNEL2_GLIDE_SAVEHL:
	ld hl, #0x0
PLY_AKG_CHANNEL2_GLIDE_END:
	.db 0xdd
    .db 0x4d
PLY_AKG_CHANNEL2_PITCH_END:
	add hl, de
    ld (PLY_AKG_CHANNEL2_PLAYINSTRUMENT_RELATIVEMODIFIERADDRESS+1), hl
    ld a, c
    ld (PLY_AKG_CHANNEL2_GENERATEDCURRENTARPNOTE+1), a
PLY_AKG_CHANNEL3_INVERTEDVOLUMEINTEGER = .+2
PLY_AKG_CHANNEL3_INVERTEDVOLUMEINTEGERANDDECIMAL:
	ld hl, #0x0
PLY_AKG_CHANNEL3_ISVOLUMESLIDE:
	or a
    jr nc, PLY_AKG_CHANNEL3_VOLUMESLIDE_END
PLY_AKG_CHANNEL3_VOLUMESLIDEVALUE:
	ld de, #0x0
    add hl, de
    bit 7, h
    jr z, PLY_AKG_CHANNEL3_VOLUMENOTOVERFLOW
    ld h, #0x0
    jr PLY_AKG_CHANNEL3_VOLUMESETAGAIN
PLY_AKG_CHANNEL3_VOLUMENOTOVERFLOW:
	ld a, h
    cp #0x10
    jr c, PLY_AKG_CHANNEL3_VOLUMESETAGAIN
    ld h, #0xf
PLY_AKG_CHANNEL3_VOLUMESETAGAIN:
	ld (PLY_AKG_CHANNEL3_INVERTEDVOLUMEINTEGERANDDECIMAL+1), hl
PLY_AKG_CHANNEL3_VOLUMESLIDE_END:
	ld a, h
    ld (PLY_AKG_CHANNEL3_GENERATEDCURRENTINVERTEDVOLUME+1), a
    ld c, #0x0
PLY_AKG_CHANNEL3_ISARPEGGIOTABLE:
	or a
    jr nc, PLY_AKG_CHANNEL3_ARPEGGIOTABLE_END
PLY_AKG_CHANNEL3_ARPEGGIOTABLE:
	ld hl, #0x0
    ld a, (hl)
    cp #0x80
    jr nz, PLY_AKG_CHANNEL3_ARPEGGIOTABLE_AFTERLOOPTEST
    inc hl
    ld a, (hl)
    inc hl
    ld h, (hl)
    ld l, a
    ld a, (hl)
PLY_AKG_CHANNEL3_ARPEGGIOTABLE_AFTERLOOPTEST:
	ld c, a
    ld a, (PLY_AKG_CHANNEL3_ARPEGGIOTABLESPEED)
    ld d, a
PLY_AKG_CHANNEL3_ARPEGGIOTABLECURRENTSTEP:
	ld a, #0x0
    inc a
    cp d
    jr c, PLY_AKG_CHANNEL3_ARPEGGIOTABLE_BEFOREEND_SAVESTEP
    inc hl
    ld (PLY_AKG_CHANNEL3_ARPEGGIOTABLE+1), hl
    xor a
PLY_AKG_CHANNEL3_ARPEGGIOTABLE_BEFOREEND_SAVESTEP:
	ld (PLY_AKG_CHANNEL3_ARPEGGIOTABLECURRENTSTEP+1), a
PLY_AKG_CHANNEL3_ARPEGGIOTABLE_END:
	ld de, #0x0
PLY_AKG_CHANNEL3_ISPITCHTABLE:
	or a
    jr nc, PLY_AKG_CHANNEL3_PITCHTABLE_END
PLY_AKG_CHANNEL3_PITCHTABLE:
	ld sp, #0x0
    pop de
    pop hl
    ld a, (PLY_AKG_CHANNEL3_PITCHTABLESPEED)
    ld b, a
PLY_AKG_CHANNEL3_PITCHTABLECURRENTSTEP:
	ld a, #0x0
    inc a
    cp b
    jr c, PLY_AKG_CHANNEL3_PITCHTABLE_BEFOREEND_SAVESTEP
    ld (PLY_AKG_CHANNEL3_PITCHTABLE+1), hl
    xor a
PLY_AKG_CHANNEL3_PITCHTABLE_BEFOREEND_SAVESTEP:
	ld (PLY_AKG_CHANNEL3_PITCHTABLECURRENTSTEP+1), a
PLY_AKG_CHANNEL3_PITCHTABLE_END:
PLY_AKG_CHANNEL3_PITCH:
	ld hl, #0x0
PLY_AKG_CHANNEL3_ISPITCH:
	or a
    jr nc, PLY_AKG_CHANNEL3_PITCH_END
    .db 0xdd
    .db 0x69
PLY_AKG_CHANNEL3_PITCHTRACK:
	ld bc, #0x0
    or a
PLY_AKG_CHANNEL3_PITCHTRACKADDORSBC_16BITS:
	nop
    add hl, bc
PLY_AKG_CHANNEL3_PITCHTRACKDECIMALCOUNTER:
	ld a, #0x0
PLY_AKG_CHANNEL3_PITCHTRACKDECIMALVALUE = .+1
PLY_AKG_CHANNEL3_PITCHTRACKDECIMALINSTR:
	add a, #0x0
    ld (PLY_AKG_CHANNEL3_PITCHTRACKDECIMALCOUNTER+1), a
    jr nc, PLY_AKG_CHANNEL3_PITCHNOCARRY
PLY_AKG_CHANNEL3_PITCHTRACKINTEGERADDORSUB:
	inc hl
PLY_AKG_CHANNEL3_PITCHNOCARRY:
	ld (PLY_AKG_CHANNEL3_PITCHTABLE_END+1), hl
PLY_AKG_CHANNEL3_SOUNDSTREAM_RELATIVEMODIFIERADDRESS:
PLY_AKG_CHANNEL3_GLIDEDIRECTION:
	ld a, #0x0
    or a
    jr z, PLY_AKG_CHANNEL3_GLIDE_END
    ld (PLY_AKG_CHANNEL3_AFTERARPEGGIOPITCHVARIABLES+1), hl
    ld c, l
    ld b, h
    ex af, af'
    ld a, (PLY_AKG_CHANNEL3_TRACKNOTE+1)
    add a, a
    ld l, a
    ex af, af'
    ld h, #0x0
    ld sp, #PLY_AKG_PERIODTABLE
    add hl, sp
    ld sp, hl
    pop hl
    dec sp
    dec sp
    add hl, bc
PLY_AKG_CHANNEL3_GLIDETOREACH:
	ld bc, #0x0
    rra 
    jr nc, PLY_AKG_CHANNEL3_GLIDEDOWNCHECK
    or a
    sbc hl, bc
    jr nc, PLY_AKG_CHANNEL3_AFTERARPEGGIOPITCHVARIABLES
    jr PLY_AKG_CHANNEL3_GLIDEOVER
PLY_AKG_CHANNEL3_GLIDEDOWNCHECK:
	sbc hl, bc
    jr c, PLY_AKG_CHANNEL3_AFTERARPEGGIOPITCHVARIABLES
PLY_AKG_CHANNEL3_GLIDEOVER:
	ld l, c
    ld h, b
    pop bc
    or a
    sbc hl, bc
    ld (PLY_AKG_CHANNEL3_PITCHTABLE_END+1), hl
    ld a, #0xb7
    ld (PLY_AKG_CHANNEL3_ISPITCH), a
    jr PLY_AKG_CHANNEL3_GLIDE_END
PLY_AKG_CHANNEL3_ARPEGGIOTABLESPEED:
	.db 0x0
PLY_AKG_CHANNEL3_ARPEGGIOBASESPEED:
	.db 0x0
PLY_AKG_CHANNEL3_ARPEGGIOTABLEBASE:
	.db 0x0
    .db 0x0
PLY_AKG_CHANNEL3_PITCHTABLESPEED:
	.db 0x0
PLY_AKG_CHANNEL3_PITCHBASESPEED:
	.db 0x0
PLY_AKG_CHANNEL3_PITCHTABLEBASE:
	.db 0x0
    .db 0x0
PLY_AKG_CHANNEL3_AFTERARPEGGIOPITCHVARIABLES:
PLY_AKG_CHANNEL3_GLIDE_BEFOREEND:
PLY_AKG_CHANNEL3_GLIDE_SAVEHL:
	ld hl, #0x0
PLY_AKG_CHANNEL3_GLIDE_END:
	.db 0xdd
    .db 0x4d
PLY_AKG_CHANNEL3_PITCH_END:
	add hl, de
    ld (PLY_AKG_CHANNEL3_PLAYINSTRUMENT_RELATIVEMODIFIERADDRESS+1), hl
    ld a, c
    ld (PLY_AKG_CHANNEL3_GENERATEDCURRENTARPNOTE+1), a
    ld sp, (PLY_AKG_PSGREG13_END+1)
PLY_AKG_CHANNEL1_PLAYINSTRUMENT_RELATIVEMODIFIERADDRESS:
PLY_AKG_CHANNEL1_GENERATEDCURRENTPITCH:
	ld hl, #0x0
PLY_AKG_CHANNEL1_TRACKNOTE:
	ld a, #0x0
PLY_AKG_CHANNEL1_GENERATEDCURRENTARPNOTE:
	add a, #0x0
    ld e, a
    ld d, #0x0
    exx
PLY_AKG_CHANNEL1_INSTRUMENTSTEP:
	.db 0xfd
    .db 0x2e
    .db 0x0
PLY_AKG_CHANNEL1_PTINSTRUMENT:
	ld hl, #0x0
PLY_AKG_CHANNEL1_GENERATEDCURRENTINVERTEDVOLUME:
	ld de, #0xe00f
    call PLY_AKG_READINSTRUMENTCELL
    .db 0xfd
    .db 0x7d
    inc a
PLY_AKG_CHANNEL1_INSTRUMENTSPEED:
	cp #0x0
    jr c, PLY_AKG_CHANNEL1_SETINSTRUMENTSTEP
    ld (PLY_AKG_CHANNEL1_PTINSTRUMENT+1), hl
    xor a
PLY_AKG_CHANNEL1_SETINSTRUMENTSTEP:
	ld (PLY_AKG_CHANNEL1_INSTRUMENTSTEP+2), a
    ld a, e
    ld (PLY_AKG_PSGREG8), a
    srl d
    exx
    ld (PLY_AKG_PSGREG01_INSTR+1), hl
PLY_AKG_CHANNEL2_PLAYINSTRUMENT_RELATIVEMODIFIERADDRESS:
PLY_AKG_CHANNEL2_GENERATEDCURRENTPITCH:
	ld hl, #0x0
PLY_AKG_CHANNEL2_TRACKNOTE:
	ld a, #0x0
PLY_AKG_CHANNEL2_GENERATEDCURRENTARPNOTE:
	add a, #0x0
    ld e, a
    ld d, #0x0
    exx
PLY_AKG_CHANNEL2_INSTRUMENTSTEP:
	.db 0xfd
    .db 0x2e
    .db 0x0
PLY_AKG_CHANNEL2_PTINSTRUMENT:
	ld hl, #0x0
PLY_AKG_CHANNEL2_GENERATEDCURRENTINVERTEDVOLUME:
	ld e, #0xf
    nop
    call PLY_AKG_READINSTRUMENTCELL
    .db 0xfd
    .db 0x7d
    inc a
PLY_AKG_CHANNEL2_INSTRUMENTSPEED:
	cp #0x0
    jr c, PLY_AKG_CHANNEL2_SETINSTRUMENTSTEP
    ld (PLY_AKG_CHANNEL2_PTINSTRUMENT+1), hl
    xor a
PLY_AKG_CHANNEL2_SETINSTRUMENTSTEP:
	ld (PLY_AKG_CHANNEL2_INSTRUMENTSTEP+2), a
    ld a, e
    ld (PLY_AKG_PSGREG9), a
    srl d
    exx
    ld (PLY_AKG_PSGREG23_INSTR+1), hl
PLY_AKG_CHANNEL3_PLAYINSTRUMENT_RELATIVEMODIFIERADDRESS:
PLY_AKG_CHANNEL3_GENERATEDCURRENTPITCH:
	ld hl, #0x0
PLY_AKG_CHANNEL3_TRACKNOTE:
	ld a, #0x0
PLY_AKG_CHANNEL3_GENERATEDCURRENTARPNOTE:
	add a, #0x0
    ld e, a
    ld d, #0x0
    exx
PLY_AKG_CHANNEL3_INSTRUMENTSTEP:
	.db 0xfd
    .db 0x2e
    .db 0x0
PLY_AKG_CHANNEL3_PTINSTRUMENT:
	ld hl, #0x0
PLY_AKG_CHANNEL3_GENERATEDCURRENTINVERTEDVOLUME:
	ld e, #0xf
    nop
    call PLY_AKG_READINSTRUMENTCELL
    .db 0xfd
    .db 0x7d
    inc a
PLY_AKG_CHANNEL3_INSTRUMENTSPEED:
	cp #0x0
    jr c, PLY_AKG_CHANNEL3_SETINSTRUMENTSTEP
    ld (PLY_AKG_CHANNEL3_PTINSTRUMENT+1), hl
    xor a
PLY_AKG_CHANNEL3_SETINSTRUMENTSTEP:
	ld (PLY_AKG_CHANNEL3_INSTRUMENTSTEP+2), a
    ld a, e
    ld (PLY_AKG_PSGREG10), a
    ld a, d
    exx
    ld (PLY_AKG_PSGREG45_INSTR+1), hl
PLY_AKG_SENDPSGREGISTERS:
	ld bc, #0xf680
    ld e, #0xc0
    out (c), e
    exx
    ld bc, #0xf401
PLY_AKG_PSGREG01_INSTR:
	ld hl, #0x0
    .db 0xed
    .db 0x71
    exx
    .db 0xed
    .db 0x71
    exx
    out (c), l
    exx
    out (c), c
    out (c), e
    exx
    out (c), c
    exx
    .db 0xed
    .db 0x71
    exx
    out (c), h
    exx
    out (c), c
    out (c), e
    exx
PLY_AKG_PSGREG23_INSTR:
	ld hl, #0x0
    inc c
    out (c), c
    exx
    .db 0xed
    .db 0x71
    exx
    out (c), l
    exx
    out (c), c
    out (c), e
    exx
    inc c
    out (c), c
    exx
    .db 0xed
    .db 0x71
    exx
    out (c), h
    exx
    out (c), c
    out (c), e
    exx
PLY_AKG_PSGREG45_INSTR:
	ld hl, #0x0
    inc c
    out (c), c
    exx
    .db 0xed
    .db 0x71
    exx
    out (c), l
    exx
    out (c), c
    out (c), e
    exx
    inc c
    out (c), c
    exx
    .db 0xed
    .db 0x71
    exx
    out (c), h
    exx
    out (c), c
    out (c), e
    exx
PLY_AKG_PSGREG6 = .+1
PLY_AKG_PSGREG8 = .+2
PLY_AKG_PSGREG6_8_INSTR:
	ld hl, #0x0
    inc c
    out (c), c
    exx
    .db 0xed
    .db 0x71
    exx
    out (c), l
    exx
    out (c), c
    out (c), e
    exx
    inc c
    out (c), c
    exx
    .db 0xed
    .db 0x71
    exx
    out (c), a
    exx
    out (c), c
    out (c), e
    exx
    inc c
    out (c), c
    exx
    .db 0xed
    .db 0x71
    exx
    out (c), h
    exx
    out (c), c
    out (c), e
    exx
PLY_AKG_PSGREG9 = .+1
PLY_AKG_PSGREG10 = .+2
PLY_AKG_PSGREG9_10_INSTR:
	ld hl, #0x0
    inc c
    out (c), c
    exx
    .db 0xed
    .db 0x71
    exx
    out (c), l
    exx
    out (c), c
    out (c), e
    exx
    inc c
    out (c), c
    exx
    .db 0xed
    .db 0x71
    exx
    out (c), h
    exx
    out (c), c
    out (c), e
    exx
PLY_AKG_PSGHARDWAREPERIOD_INSTR:
	ld hl, #0x0
    inc c
    out (c), c
    exx
    .db 0xed
    .db 0x71
    exx
    out (c), l
    exx
    out (c), c
    out (c), e
    exx
    inc c
    out (c), c
    exx
    .db 0xed
    .db 0x71
    exx
    out (c), h
    exx
    out (c), c
    out (c), e
    exx
PLY_AKG_PSGREG13_OLDVALUE:
	ld a, #0xff
PLY_AKG_RETRIG:
	or #0x0
PLY_AKG_PSGREG13_INSTR:
	ld l, #0x0
    cp l
    jr z, PLY_AKG_PSGREG13_END
    ld a, l
    ld (PLY_AKG_PSGREG13_OLDVALUE+1), a
    inc c
    out (c), c
    exx
    .db 0xed
    .db 0x71
    exx
    out (c), a
    exx
    out (c), c
    out (c), e
    xor a
    ld (PLY_AKG_RETRIG+1), a
PLY_AKG_PSGREG13_END:
PLY_AKG_SAVESP:
	ld sp, #0x0
    ret 
PLY_AKG_CHANNEL1_MAYBEEFFECTS:
	ld (PLY_AKG_EVENTTRACK_END+1), a
    bit 6, c
    jp z, PLY_AKG_CHANNEL1_BEFOREEND_STORECELLPOINTER
PLY_AKG_CHANNEL1_READEFFECTS:
	ld iy, #PLY_AKG_CHANNEL1_SOUNDSTREAM_RELATIVEMODIFIERADDRESS
    ld ix, #PLY_AKG_CHANNEL1_PLAYINSTRUMENT_RELATIVEMODIFIERADDRESS
    ld de, #PLY_AKG_CHANNEL1_BEFOREEND_STORECELLPOINTER
    jr PLY_AKG_CHANNEL3_READEFFECTSEND
PLY_AKG_CHANNEL1_READEFFECTSEND:
PLY_AKG_CHANNEL2_MAYBEEFFECTS:
	ld (PLY_AKG_CHANNEL1_READCELLEND+1), a
    bit 6, c
    jp z, PLY_AKG_CHANNEL2_BEFOREEND_STORECELLPOINTER
PLY_AKG_CHANNEL2_READEFFECTS:
	ld iy, #PLY_AKG_CHANNEL2_SOUNDSTREAM_RELATIVEMODIFIERADDRESS
    ld ix, #PLY_AKG_CHANNEL2_PLAYINSTRUMENT_RELATIVEMODIFIERADDRESS
    ld de, #PLY_AKG_CHANNEL2_BEFOREEND_STORECELLPOINTER
    jr PLY_AKG_CHANNEL3_READEFFECTSEND
PLY_AKG_CHANNEL2_READEFFECTSEND:
PLY_AKG_CHANNEL3_MAYBEEFFECTS:
	ld (PLY_AKG_CHANNEL2_READCELLEND+1), a
    bit 6, c
    jp z, PLY_AKG_CHANNEL3_BEFOREEND_STORECELLPOINTER
PLY_AKG_CHANNEL3_READEFFECTS:
	ld iy, #PLY_AKG_CHANNEL3_SOUNDSTREAM_RELATIVEMODIFIERADDRESS
    ld ix, #PLY_AKG_CHANNEL3_PLAYINSTRUMENT_RELATIVEMODIFIERADDRESS
    ld de, #PLY_AKG_CHANNEL3_BEFOREEND_STORECELLPOINTER
PLY_AKG_CHANNEL3_READEFFECTSEND:
PLY_AKG_CHANNEL_READEFFECTS:
	ld (PLY_AKG_CHANNEL_READEFFECTS_ENDJUMP+1), de
    ex de, hl
    ld a, (de)
    inc de
    sla a
    jr c, PLY_AKG_CHANNEL_READEFFECTS_RELATIVEADDRESS
    exx
    ld l, a
    ld h, #0x0
PLY_AKG_CHANNEL_READEFFECTS_EFFECTBLOCKS1:
	ld de, #0x0
    add hl, de
    ld e, (hl)
    inc hl
    ld d, (hl)
PLY_AKG_CHANNEL_RE_EFFECTADDRESSKNOWN:
	ld a, (de)
    inc de
    ld (PLY_AKG_CHANNEL_RE_EFFECTRETURN+1), a
    and #0xfe
    ld l, a
    ld h, #0x0
    ld sp, #PLY_AKG_EFFECTTABLE
    add hl, sp
    ld sp, hl
    ret 
PLY_AKG_CHANNEL_RE_EFFECTRETURN:
PLY_AKG_CHANNEL_RE_READNEXTEFFECTINBLOCK:
	ld a, #0x0
    rra 
    jr c, PLY_AKG_CHANNEL_RE_EFFECTADDRESSKNOWN
    exx
    ex de, hl
PLY_AKG_CHANNEL_READEFFECTS_ENDJUMP:
	jp 0x0
PLY_AKG_CHANNEL_READEFFECTS_RELATIVEADDRESS:
	srl a
    exx
    ld h, a
    exx
    ld a, (de)
    inc de
    exx
    ld l, a
PLY_AKG_CHANNEL_READEFFECTS_EFFECTBLOCKS2:
	ld de, #0x0
    add hl, de
    jr PLY_AKG_CHANNEL_RE_EFFECTADDRESSKNOWN
PLY_AKG_READINSTRUMENTCELL:
	ld a, (hl)
    inc hl
    ld b, a
    rra 
    jp c, PLY_AKG_S_OR_H_OR_SAH_OR_ENDWITHLOOP
    rra 
    jr c, PLY_AKG_STH_OR_ENDWITHOUTLOOP
    rra 
    jr c, PLY_AKG_HARDTOSOFT
PLY_AKG_NOSOFTNOHARD:
	and #0xf
    sub e
    jr nc, PLY_AKG_NOSOFTNOHARD+6
    xor a
    ld e, a
    rl b
    jr nc, PLY_AKG_NSNH_NONOISE
    ld a, (hl)
    inc hl
    ld (PLY_AKG_PSGREG6), a
    set 2, d
    res 5, d
    ret 
PLY_AKG_NSNH_NONOISE:
	set 2, d
    ret 
PLY_AKG_SOFT:
	and #0xf
    sub e
    jr nc, PLY_AKG_SOFTONLY_HARDONLY_TESTSIMPLE_COMMON-1
    xor a
    ld e, a
PLY_AKG_SOFTONLY_HARDONLY_TESTSIMPLE_COMMON:
	rl b
    jr nc, PLY_AKG_S_NOTSIMPLE
    ld c, #0x0
    jr PLY_AKG_S_AFTERSIMPLETEST
PLY_AKG_S_NOTSIMPLE:
	ld b, (hl)
    ld c, b
    inc hl
PLY_AKG_S_AFTERSIMPLETEST:
	call PLY_AKG_S_OR_H_CHECKIFSIMPLEFIRST_CALCULATEPERIOD
    ld a, c
    and #0x1f
    ret z
    ld (PLY_AKG_PSGREG6), a
    res 5, d
    ret 
PLY_AKG_HARDTOSOFT:
	call PLY_AKG_STOH_HTOS_SANDH_COMMON
    ld (PLY_AKG_HS_JUMPRATIO+1), a
    ld a, b
    exx
    ld (PLY_AKG_PSGHARDWAREPERIOD_INSTR+1), hl
PLY_AKG_HS_JUMPRATIO:
	jr PLY_AKG_HS_JUMPRATIO+2
    sla l
    rl h
    sla l
    rl h
    sla l
    rl h
    sla l
    rl h
    sla l
    rl h
    sla l
    rl h
    sla l
    rl h
    rla 
    jr nc, PLY_AKG_SH_NOSOFTWAREPITCHSHIFT
    exx
    ld a, (hl)
    inc hl
    exx
    add a, l
    ld l, a
    exx
    ld a, (hl)
    inc hl
    exx
    adc a, h
    ld h, a
PLY_AKG_SH_NOSOFTWAREPITCHSHIFT:
	exx
    ret 
PLY_AKG_ENDWITHOUTLOOP:
PLY_AKG_EMPTYINSTRUMENTDATAPT:
	ld hl, #0x0
    inc hl
    xor a
    ld b, a
    jr PLY_AKG_NOSOFTNOHARD
PLY_AKG_STH_OR_ENDWITHOUTLOOP:
	rra 
    jr c, PLY_AKG_ENDWITHOUTLOOP
    call PLY_AKG_STOH_HTOS_SANDH_COMMON
    ld (PLY_AKG_SH_JUMPRATIO+1), a
    ld a, b
    exx
    ld e, l
    ld d, h
PLY_AKG_SH_JUMPRATIO:
	jr PLY_AKG_SH_JUMPRATIO+2
    srl h
    rr l
    srl h
    rr l
    srl h
    rr l
    srl h
    rr l
    srl h
    rr l
    srl h
    rr l
    srl h
    rr l
    jr nc, PLY_AKG_SH_JUMPRATIOEND
    inc hl
PLY_AKG_SH_JUMPRATIOEND:
	rla 
    jr nc, PLY_AKG_SH_NOHARDWAREPITCHSHIFT
    exx
    ld a, (hl)
    inc hl
    exx
    add a, l
    ld l, a
    exx
    ld a, (hl)
    inc hl
    exx
    adc a, h
    ld h, a
PLY_AKG_SH_NOHARDWAREPITCHSHIFT:
	ld (PLY_AKG_PSGHARDWAREPERIOD_INSTR+1), hl
    ex de, hl
    exx
    ret 
PLY_AKG_S_OR_H_OR_SAH_OR_ENDWITHLOOP:
	rra 
    jr c, PLY_AKG_H_OR_ENDWITHLOOP
    rra 
    jp nc, PLY_AKG_SOFT
    exx
    push hl
    push de
    exx
    call PLY_AKG_STOH_HTOS_SANDH_COMMON
    exx
    ld (PLY_AKG_PSGHARDWAREPERIOD_INSTR+1), hl
    pop de
    pop hl
    exx
    rl b
    jp PLY_AKG_S_OR_H_CHECKIFSIMPLEFIRST_CALCULATEPERIOD
PLY_AKG_H_OR_ENDWITHLOOP:
	rra 
    jr c, PLY_AKG_ENDWITHLOOP
    ld e, #0x10
    rra 
    jr nc, PLY_AKG_H_AFTERRETRIG
    ld c, a
    .db 0xfd
    .db 0x7d
    or a
    jr nz, PLY_AKG_H_RETRIGEND
    ld a, e
    ld (PLY_AKG_RETRIG+1), a
PLY_AKG_H_RETRIGEND:
	ld a, c
PLY_AKG_H_AFTERRETRIG:
	and #0x7
    add a, #0x8
    ld (PLY_AKG_PSGREG13_INSTR+1), a
    call PLY_AKG_SOFTONLY_HARDONLY_TESTSIMPLE_COMMON
    exx
    ld (PLY_AKG_PSGHARDWAREPERIOD_INSTR+1), hl
    exx
    set 2, d
    ret 
PLY_AKG_ENDWITHLOOP:
	ld a, (hl)
    inc hl
    ld h, (hl)
    ld l, a
    jp PLY_AKG_READINSTRUMENTCELL
PLY_AKG_S_OR_H_CHECKIFSIMPLEFIRST_CALCULATEPERIOD:
	jr nc, PLY_AKG_S_OR_H_NEXTBYTE
    exx
    ex de, hl
    add hl, hl
    ld bc, #PLY_AKG_PERIODTABLE
    add hl, bc
    ld a, (hl)
    inc hl
    ld h, (hl)
    ld l, a
    add hl, de
    exx
    rl b
    rl b
    rl b
    ret 
PLY_AKG_S_OR_H_NEXTBYTE:
	rl b
    jr c, PLY_AKG_S_OR_H_FORCEDPERIOD
    rl b
    jr nc, PLY_AKG_S_OR_H_AFTERARPEGGIO
    ld a, (hl)
    inc hl
    exx
    add a, e
    ld e, a
    exx
PLY_AKG_S_OR_H_AFTERARPEGGIO:
	rl b
    jr nc, PLY_AKG_S_OR_H_AFTERPITCH
    ld a, (hl)
    inc hl
    exx
    add a, l
    ld l, a
    exx
    ld a, (hl)
    inc hl
    exx
    adc a, h
    ld h, a
    exx
PLY_AKG_S_OR_H_AFTERPITCH:
	exx
    ex de, hl
    add hl, hl
    ld bc, #PLY_AKG_PERIODTABLE
    add hl, bc
    ld a, (hl)
    inc hl
    ld h, (hl)
    ld l, a
    add hl, de
    exx
    ret 
PLY_AKG_S_OR_H_FORCEDPERIOD:
	ld a, (hl)
    inc hl
    exx
    ld l, a
    exx
    ld a, (hl)
    inc hl
    exx
    ld h, a
    exx
    rl b
    rl b
    ret 
PLY_AKG_STOH_HTOS_SANDH_COMMON:
	ld e, #0x10
    rra 
    jr nc, PLY_AKG_SHOHS_AFTERRETRIG
    ld c, a
    .db 0xfd
    .db 0x7d
    or a
    jr nz, PLY_AKG_SHOHS_RETRIGEND
    dec a
    ld (PLY_AKG_RETRIG+1), a
PLY_AKG_SHOHS_RETRIGEND:
	ld a, c
PLY_AKG_SHOHS_AFTERRETRIG:
	and #0x7
    add a, #0x8
    ld (PLY_AKG_PSGREG13_INSTR+1), a
    rl b
    jr nc, PLY_AKG_SHOHS_AFTERNOISE
    ld a, (hl)
    inc hl
    ld (PLY_AKG_PSGREG6), a
    res 5, d
PLY_AKG_SHOHS_AFTERNOISE:
	ld c, (hl)
    ld b, c
    inc hl
    rl b
    call PLY_AKG_S_OR_H_CHECKIFSIMPLEFIRST_CALCULATEPERIOD
    ld a, c
    rla 
    rla 
    and #0x1c
    ret 
PLY_AKG_EFFECTTABLE:
	.dw PLY_AKG_EFFECT_RESETFULLVOLUME
    .dw PLY_AKG_EFFECT_RESET
    .dw PLY_AKG_EFFECT_VOLUME
    .dw PLY_AKG_EFFECT_ARPEGGIOTABLE
    .dw PLY_AKG_EFFECT_ARPEGGIOTABLESTOP
    .dw PLY_AKG_EFFECT_PITCHTABLE
    .dw PLY_AKG_EFFECT_PITCHTABLESTOP
    .dw PLY_AKG_EFFECT_VOLUMESLIDE
    .dw PLY_AKG_EFFECT_VOLUMESLIDESTOP
    .dw PLY_AKG_EFFECT_PITCHUP
    .dw PLY_AKG_EFFECT_PITCHDOWN
    .dw PLY_AKG_EFFECT_PITCHSTOP
    .dw PLY_AKG_EFFECT_GLIDEWITHNOTE
    .dw PLY_AKG_EFFECT_GLIDE_READSPEED
    .dw PLY_AKG_EFFECT_LEGATO
    .dw PLY_AKG_EFFECT_FORCEINSTRUMENTSPEED
    .dw PLY_AKG_EFFECT_FORCEARPEGGIOSPEED
    .dw PLY_AKG_EFFECT_FORCEPITCHSPEED
PLY_AKG_EFFECT_RESETFULLVOLUME:
	xor a
    jr PLY_AKG_EFFECT_RESETVOLUME_AFTERREADING
PLY_AKG_EFFECT_RESET:
	ld a, (de)
    inc de
PLY_AKG_EFFECT_RESETVOLUME_AFTERREADING:
	ld -123(iy), a
    xor a
    ld -26(iy), a
    ld -25(iy), a
    ld a, #0xb7
    ld -24(iy), a
    ld -52(iy), a
    ld -91(iy), a
    ld -122(iy), a
    jp PLY_AKG_CHANNEL_RE_EFFECTRETURN
PLY_AKG_EFFECT_VOLUME:
	ld a, (de)
    inc de
    ld -123(iy), a
    ld -122(iy), #0xb7
    jp PLY_AKG_CHANNEL_RE_EFFECTRETURN
PLY_AKG_EFFECT_ARPEGGIOTABLE:
	ld a, (de)
    inc de
    ld l, a
    ld h, #0x0
    add hl, hl
PLY_AKG_ARPEGGIOSTABLE:
	ld bc, #0x0
    add hl, bc
    ld c, (hl)
    inc hl
    ld b, (hl)
    inc hl
    ld a, (bc)
    inc bc
    ld +61(iy), a
    ld +62(iy), a
    ld -87(iy), c
    ld -86(iy), b
    ld +63(iy), c
    ld +64(iy), b
    ld -91(iy), #0x37
    xor a
    ld -68(iy), a
    jp PLY_AKG_CHANNEL_RE_EFFECTRETURN
PLY_AKG_EFFECT_ARPEGGIOTABLESTOP:
	ld -91(iy), #0xb7
    jp PLY_AKG_CHANNEL_RE_EFFECTRETURN
PLY_AKG_EFFECT_PITCHTABLE:
	ld a, (de)
    inc de
    ld l, a
    ld h, #0x0
    add hl, hl
PLY_AKG_PITCHESTABLE:
	ld bc, #0x0
    add hl, bc
    ld c, (hl)
    inc hl
    ld b, (hl)
    inc hl
    ld a, (bc)
    inc bc
    ld +65(iy), a
    ld +66(iy), a
    ld -48(iy), c
    ld -47(iy), b
    ld +67(iy), c
    ld +68(iy), b
    ld -52(iy), #0x37
    xor a
    ld -39(iy), a
    jp PLY_AKG_CHANNEL_RE_EFFECTRETURN
PLY_AKG_EFFECT_PITCHTABLESTOP:
	ld -52(iy), #0xb7
    jp PLY_AKG_CHANNEL_RE_EFFECTRETURN
PLY_AKG_EFFECT_VOLUMESLIDE:
	ld a, (de)
    inc de
    ld -118(iy), a
    ld a, (de)
    inc de
    ld -117(iy), a
    ld -122(iy), #0x37
    jp PLY_AKG_CHANNEL_RE_EFFECTRETURN
PLY_AKG_EFFECT_VOLUMESLIDESTOP:
	ld -122(iy), #0xb7
    jp PLY_AKG_CHANNEL_RE_EFFECTRETURN
PLY_AKG_EFFECT_PITCHDOWN:
	ld -15(iy), #0x0
    ld -14(iy), #0x9
    ld -11(iy), #0xc6
    ld -4(iy), #0x23
PLY_AKG_EFFECT_PITCHUPDOWN_COMMON:
	ld -24(iy), #0x37
    ld +1(iy), #0x0
    ld a, (de)
    inc de
    ld -10(iy), a
    ld a, (de)
    inc de
    ld -18(iy), a
    jp PLY_AKG_CHANNEL_RE_EFFECTRETURN
PLY_AKG_EFFECT_PITCHUP:
	ld -15(iy), #0xed
    ld -14(iy), #0x42
    ld -11(iy), #0xd6
    ld -4(iy), #0x2b
    jr PLY_AKG_EFFECT_PITCHUPDOWN_COMMON
PLY_AKG_EFFECT_PITCHSTOP:
	ld -24(iy), #0xb7
    jp PLY_AKG_CHANNEL_RE_EFFECTRETURN
PLY_AKG_EFFECT_GLIDEWITHNOTE:
	ld a, (de)
    inc de
    ld (PLY_AKG_EFFECT_GLIDEWITHNOTESAVEDE+1), de
    add a, a
    ld l, a
    ld h, #0x0
    ld bc, #PLY_AKG_PERIODTABLE
    add hl, bc
    ld sp, hl
    pop de
    ld +29(iy), e
    ld +30(iy), d
    ld a, +4(ix)
    add a, a
    ld l, a
    ld h, #0x0
    add hl, bc
    ld sp, hl
    pop hl
    ld c, -26(iy)
    ld b, -25(iy)
    add hl, bc
    or a
    sbc hl, de
PLY_AKG_EFFECT_GLIDEWITHNOTESAVEDE:
	ld de, #0x0
    jr c, PLY_AKG_EFFECT_GLIDE_PITCHDOWN
    ld +1(iy), #0x1
    ld -15(iy), #0xed
    ld -14(iy), #0x42
    ld -11(iy), #0xd6
    ld -4(iy), #0x2b
PLY_AKG_EFFECT_GLIDE_READSPEED:
PLY_AKG_EFFECT_GLIDESPEED:
	ld a, (de)
    inc de
    ld -10(iy), a
    ld a, (de)
    inc de
    ld -18(iy), a
    ld a, #0x37
    ld -24(iy), a
    jp PLY_AKG_CHANNEL_RE_EFFECTRETURN
PLY_AKG_EFFECT_GLIDE_PITCHDOWN:
	ld +1(iy), #0x2
    ld -15(iy), #0x0
    ld -14(iy), #0x9
    ld -11(iy), #0xc6
    ld -4(iy), #0x23
    jr PLY_AKG_EFFECT_GLIDE_READSPEED
PLY_AKG_EFFECT_LEGATO:
	ld a, (de)
    inc de
    ld +4(ix), a
    ld a, #0xb7
    ld -24(iy), a
    xor a
    ld -26(iy), a
    ld -25(iy), a
    jp PLY_AKG_CHANNEL_RE_EFFECTRETURN
PLY_AKG_EFFECT_FORCEINSTRUMENTSPEED:
	ld a, (de)
    inc de
    ld +27(ix), a
    jp PLY_AKG_CHANNEL_RE_EFFECTRETURN
PLY_AKG_EFFECT_FORCEARPEGGIOSPEED:
	ld a, (de)
    inc de
    ld +61(iy), a
    jp PLY_AKG_CHANNEL_RE_EFFECTRETURN
PLY_AKG_EFFECT_FORCEPITCHSPEED:
	ld a, (de)
    inc de
    ld +65(iy), a
    jp PLY_AKG_CHANNEL_RE_EFFECTRETURN
PLY_AKG_EVENT:
	.db 0x0
PLY_AKG_PERIODTABLE:
	.dw 0xeee
    .dw 0xe18
    .dw 0xd4d
    .dw 0xc8e
    .dw 0xbda
    .dw 0xb2f
    .dw 0xa8f
    .dw 0x9f7
    .dw 0x968
    .dw 0x8e1
    .dw 0x861
    .dw 0x7e9
    .dw 0x777
    .dw 0x70c
    .dw 0x6a7
    .dw 0x647
    .dw 0x5ed
    .dw 0x598
    .dw 0x547
    .dw 0x4fc
    .dw 0x4b4
    .dw 0x470
    .dw 0x431
    .dw 0x3f4
    .dw 0x3bc
    .dw 0x386
    .dw 0x353
    .dw 0x324
    .dw 0x2f6
    .dw 0x2cc
    .dw 0x2a4
    .dw 0x27e
    .dw 0x25a
    .dw 0x238
    .dw 0x218
    .dw 0x1fa
    .dw 0x1de
    .dw 0x1c3
    .dw 0x1aa
    .dw 0x192
    .dw 0x17b
    .dw 0x166
    .dw 0x152
    .dw 0x13f
    .dw 0x12d
    .dw 0x11c
    .dw 0x10c
    .dw 0xfd
    .dw 0xef
    .dw 0xe1
    .dw 0xd5
    .dw 0xc9
    .dw 0xbe
    .dw 0xb3
    .dw 0xa9
    .dw 0x9f
    .dw 0x96
    .dw 0x8e
    .dw 0x86
    .dw 0x7f
    .dw 0x77
    .dw 0x71
    .dw 0x6a
    .dw 0x64
    .dw 0x5f
    .dw 0x59
    .dw 0x54
    .dw 0x50
    .dw 0x4b
    .dw 0x47
    .dw 0x43
    .dw 0x3f
    .dw 0x3c
    .dw 0x38
    .dw 0x35
    .dw 0x32
    .dw 0x2f
    .dw 0x2d
    .dw 0x2a
    .dw 0x28
    .dw 0x26
    .dw 0x24
    .dw 0x22
    .dw 0x20
    .dw 0x1e
    .dw 0x1c
    .dw 0x1b
    .dw 0x19
    .dw 0x18
    .dw 0x16
    .dw 0x15
    .dw 0x14
    .dw 0x13
    .dw 0x12
    .dw 0x11
    .dw 0x10
    .dw 0xf
    .dw 0xe
    .dw 0xd
    .dw 0xd
    .dw 0xc
    .dw 0xb
    .dw 0xb
    .dw 0xa
    .dw 0x9
    .dw 0x9
    .dw 0x8
    .dw 0x8
    .dw 0x7
    .dw 0x7
    .dw 0x7
    .dw 0x6
    .dw 0x6
    .dw 0x6
    .dw 0x5
    .dw 0x5
    .dw 0x5
    .dw 0x4
    .dw 0x4
    .dw 0x4
    .dw 0x4
    .dw 0x4
    .dw 0x3
    .dw 0x3
    .dw 0x3
    .dw 0x3
    .dw 0x3
    .dw 0x2
__endasm;                 
}                         
